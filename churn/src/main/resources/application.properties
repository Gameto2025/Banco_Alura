# ============================================================
# CONFIGURACIÓN PARA H2 CON PERSISTENCIA (DATOS NO SE BORRAN)
# ============================================================

# 1. INFORMACIÓN DE LA APLICACIÓN
spring.application.name=churn-predictor
server.port=${PORT:8080}
server.servlet.context-path=/

# 2. BASE DE DATOS H2 CON ARCHIVO (PERSISTENTE)
# Los datos se guardan en: ./data/churn_db.mv.db
spring.datasource.url=jdbc:h2:file:./data/churn_db;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# 3. CONFIGURACIÓN JPA / HIBERNATE
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update  
spring.jpa.show-sql=true              
spring.jpa.properties.hibernate.format_sql=true  
spring.jpa.properties.hibernate.jdbc.batch_size=10
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# 4. CONSOLA H2 (ACCESO WEB A LA BASE DE DATOS)
# URL: http://localhost:8080/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-allow-others=false

# 5. CONFIGURACIÓN DE LOGGING
logging.level.com.alura.churn=INFO          
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG         
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.jpmml=WARN

# Formato de logs
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36}: %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36}: %msg%n

# Archivo de logs
logging.file.name=logs/churn-application.log
logging.file.max-size=10MB
logging.file.max-history=5

# 6. CONFIGURACIÓN JACKSON (JSON)
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.time-zone=America/Santiago
spring.jackson.serialization.indent-output=true  
spring.jackson.default-property-inclusion=NON_NULL

# 7. CONFIGURACIÓN CORS (PARA DESARROLLO)
# Permite peticiones desde tu frontend
cors.allowed-origins=http://localhost:5500,http://127.0.0.1:5500,http://localhost:63342
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# 8. CONFIGURACIÓN MULTIPART (SI SUBES ARCHIVOS)
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# 9. DESACTIVAR CACHE EN DESARROLLO
spring.cache.type=none
spring.thymeleaf.cache=false
spring.freemarker.cache=false
spring.groovy.template.cache=false
spring.mustache.cache=false

# 10. CONFIGURACIÓN DE CODIFICACIÓN
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true